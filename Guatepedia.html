<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="./gratis-png-bandera-de-guatemala-computadora-iconos-icono-diseno-educacion-en-el-extranjero-removebg-.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <title>Guatepedia</title>
    <link rel = "stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body {
          margin: 0;
          background-color: #000000
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      .spinner-border {
        animation: spin 2s linear infinite;
      }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
    

    // Este es el spiner de carga
    const LoadingSpinner = () => {
      return (
        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>
          <div className="spinner-border" role="status" style={{ color: 'white', fontSize: '60px', animation: 'spin 2s linear infinite' }}>
            <i class="fa-solid fa-spinner"></i>
          </div>
          <span className="visually-hidden" style = {{color: 'white', fontSize: '60px'}}> Cargando</span>
        </div>
      )
    }

    const ErrorLabel = () => {
      return (
        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>
          <i class="fa-solid fa-xmark" style = {{color: 'white', fontSize: '60px'}}></i>
          <span className="visually-hidden" style = {{color: 'white', fontSize: '60px'}}> No hay ningun post disponible</span>
        </div>
      )
    }



      const Header = () => {
        const imageStyles = {
          width: '100%', // Cambia el ancho según lo necesites
          height: '200px', // Altura fija de 200 píxeles
          objectFit: 'cover' // Para mantener la proporción y cubrir el contenedor
        }
        const titleStyles = {
          display: 'flex',
          backgroundColor: 'transparent',
          fontSize: '80px',
          justifyContent: 'center',
          fontFamily: 'monospace', /* Utiliza una fuente monoespaciada */
          color: 'white', /* Utiliza un color verde típico de muchas terminales */
          marginBottom: '0px',
          transform: 'translateY(-105%)'
        }
        return (
          <div>
            <img className="imagen" src="https://content.r9cdn.net/rimg/dimg/6f/d5/a11de2dc-city-43889-162df482d9d.jpg?width=1200&height=630&xhint=1422&yhint=2033&crop=true" alt="Descripción de la imagen" style={imageStyles}/>
            <h1 class="Titulo_Principal"
            style = {titleStyles}>Guatepedia</h1>
          </div>
          
        )
      }

      const CreateArticle = ({ postId }) => {
        const [postData, setPostData] = React.useState(null);

        React.useEffect(() => {
          const getPostById = async (postId) => {
            
            const response = await fetch(`https://api.tiburoncin.lat/22982/posts/${postId}`);
            if (!response.ok) {
              throw new Error('Error al obtener el post');
            }
            const postData = await response.json();
            setPostData(postData)
            
          }

          getPostById(postId);
        }, [postId]);

        if (!postData) {
          return <LoadingSpinner />;
        }

        return (
          <div>
            <h1 style = {{ color: 'white'}}>{postData[0].Pearson}</h1>
            {/* Aquí puedes mostrar el resto de la información del artículo */}
          </div>
        );
      };


      const Footer = () => {
        const styles = {
          display: 'flex',
          color: 'white',
          fontSize: '20px',
          justifyContent: 'center',
          marginTop: '20px'
        }
        return (
          <footer style={styles}>
            Copyright 2024 UVG
          </footer>
        )
      }


      const Post = ({ id, title, body, img , handleSelectPost}) => {
        const stylesPost = {
          backgroundColor: '#101214',
          height: '900px',
          marginLeft: '10px',
          borderRadius: '7px',
          marginTop: '20px',
          display: 'grid',
          width: '900px',
          gridTemplateRows: '1fr 2fr 6fr 1fr'
        }
        const styleTitulo = {
          gridRow: '1',
          fontSize: '40px',
          backgroundColor: 'transparent',
          color: 'white',
          marginLeft: '20px',
          marginTop: '20px'
        }

        const styleBrief = {
          gridRow: '2',
          fontSize: '20px',
          backgroundColor: 'transparent',
          color: 'lightgray',
          marginLeft: '20px',
          marginTop: '20px',
          marginRight: '10px'
        }

        const styleImage = {
          gridRow: '3',
          backgroundColor: 'transparent',
          width: '850px',
          height: '550px',
          marginLeft: '20px',
          objectFit: 'cover'
        }
        const styleareaBoton = {
          marginTop: '10px',
          gridRow: '4',
          backgroundColor: 'transparent'
        }
        const stylebotones = {
          width: '100px',
          height: '50px',
          backgroundColor: '#232629',
          borderRadius: '20px',
          marginLeft: '10px',
          borderColor: 'transparent',
        }
        const iconostyle = {
          color: '#888a8d',
          fontSize: '30px'
        }
        
        return (
          <div class = 'contenedor' style={stylesPost}
          onMouseEnter={(e) => e.target.style.backgroundColor = '#1a1c1d'}
          onClick={() => handleSelectPost('articulo',id)}
          >
            <div class = 'titulo' style = {styleTitulo}>{title}</div>
            <div class = 'brief' style = {styleBrief}>{body}</div>
            <img src={img} alt="Descripción de la imagen" style={styleImage}/>
            <div class = 'botonarea' style = {styleareaBoton}>
              <button style = {stylebotones} ><i class="fa-solid fa-trash" style = {iconostyle}></i></button>
              <button style = {stylebotones}><i class="fa-solid fa-pen-to-square" style = {iconostyle}></i></button>
            </div>
          </div>
          
        )
      }


      const Posts = ({ handleSelectPost }) => {
        const [ posts, setPosts ] = React.useState([])
        const getPosts = async () => {
          const apiResponse = await fetch('https://api.tiburoncin.lat/22982/posts')
          const jsonPosts = await apiResponse.json()
          const formattedPosts = jsonPosts.map(
            ({ id, Pearson, Few_Description,images  }) => ({ id:id, title: Pearson, body: Few_Description,img:images })
          ) 
          setPosts(formattedPosts)
        }

        React.useEffect(() => {
          getPosts()}, [])
        
          if (posts.length === 0) {
            return <LoadingSpinner />
          }

        return (
          <div class = 'CotenedorPosts'>
            {posts.map(({ id, title, body, img }) => <Post id={id} title={title} body={body}  img = {img} handleSelectPost = {handleSelectPost}/>)}   
          </div>
        )
      }

      const App = () => {
        const [currentPage, setCurrentPage] = React.useState('home')
        const [currentPost, setCurrentPost] = React.useState('0')
        const styles = {
          backgroundColor: 'rgb(0, 0, 0)',
          height: '100vh',
          width: '100vw'
        }
        const styleconedor = {
          margintop: '0px',
          display: 'flex',
          justifyContent: 'space-around'
        }
        const botonesinicio = {
          borderRadius: '10px',
          backgroundColor: 'white',
          fontSize: '25px',
          width: '600px',
          height: '50px'
        }
        const handleButtonClick = (page) => {
          setCurrentPage(page)
        }

        const handleSelectPost = (page, id) => {
          setCurrentPage(page)
          setCurrentPost(id)
        }

        let content;
        switch (currentPage) {
          case 'home':
            content = (
              <Posts handleSelectPost={handleSelectPost} />
            )
          break;
          case 'postear':
            content = (
                <div>
                    
                </div>
              )
            break;
          case 'articulo':
            content = (
                <CreateArticle postId = {currentPost}/>
            )
            break;
          default:

            break;
        }
        return (
          <main style={styles}>
            <Header />
            <div class = "Contenedor_Botones" style = {styleconedor}>
              <button class="botonesinicio" style = {botonesinicio} onClick={() => handleButtonClick('home')} ><i class="fa-solid fa-house"></i>Principal</button>
              <button class="botonesinicio" style = {botonesinicio} onClick={() => handleButtonClick('postear')}><i class="fa-solid fa-plus"></i>Postear</button>
            </div>
            <React.Suspense fallback={<LoadingSpinner />}>
              {content}
            </React.Suspense>
            <Footer />  
          </main>
        )
      }

    const root = ReactDOM.createRoot(document.getElementById('root'))
    root.render(<App />)
    </script>
</body>
</html>
